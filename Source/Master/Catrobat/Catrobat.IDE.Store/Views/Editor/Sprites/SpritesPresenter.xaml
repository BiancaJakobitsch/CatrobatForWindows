<Page
  x:Name="PageRoot"
  x:Class="Catrobat.IDE.Store.Views.Editor.Sprites.SpritesPresenter"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:Catrobat.IDE.Store.Views.Editor.Sprites"
  xmlns:common="using:Catrobat.IDE.Store.Common"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:appBar="using:Catrobat.IDE.Store.Controls.AppBar"
  xmlns:pages="using:Catrobat.IDE.Store.Controls.Pages"
  xmlns:costumes="using:Catrobat.IDE.Store.Views.Editor.Costumes"
  xmlns:main="using:Catrobat.IDE.Store.Views.Main"
  xmlns:listView="using:Catrobat.IDE.Store.Controls.ListView"
  xmlns:scripts="using:Catrobat.IDE.Store.Views.Editor.Scripts"
  xmlns:application="using:Catrobat.IDE.Store.Content.Images.Application"
  xmlns:controls="using:GridViewSamples.Controls"
  xmlns:sounds="using:Catrobat.IDE.Store.Views.Editor.Sounds"
  xmlns:actions="using:Catrobat.IDE.Store.Controls.Actions"
  mc:Ignorable="d">
  <Page.Resources>
    <Style x:Key="RadioButtonTabsTemplate" TargetType="RadioButton">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Foreground" Value="{ThemeResource RadioButtonContentForegroundThemeBrush}"/>
      <Setter Property="Padding" Value="1,4,0,0"/>
      <Setter Property="HorizontalAlignment" Value="Stretch"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="HorizontalContentAlignment" Value="Left"/>
      <Setter Property="VerticalContentAlignment" Value="Top"/>
      <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
      <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="RadioButton">
            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
              <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                  <VisualState x:Name="Normal"/>
                  <VisualState x:Name="PointerOver">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource RadioButtonContentDisabledForegroundThemeBrush}"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Pressed">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="#3366CC"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Disabled">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource RadioButtonContentDisabledForegroundThemeBrush}"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="CheckStates">
                  <VisualState x:Name="Checked">
                    <Storyboard>
                      <DoubleAnimation Duration="0" To="50.0" Storyboard.TargetProperty="FontSize" Storyboard.TargetName="ContentPresenter"/>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="#3366CC"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Unchecked" >
                    <!--<Storyboard>
                      <DoubleAnimation Duration="0" To="40.0" Storyboard.TargetProperty="FontSize" Storyboard.TargetName="ContentPresenter"/>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource RadioButtonContentDisabledForegroundThemeBrush}"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>-->
                  </VisualState>
                  <VisualState x:Name="Indeterminate" >
                    <!--<Storyboard>
                      <DoubleAnimation Duration="0" To="40.0" Storyboard.TargetProperty="FontSize" Storyboard.TargetName="ContentPresenter"/>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource RadioButtonContentDisabledForegroundThemeBrush}"/>
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>-->
                  </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="FocusStates">
                  <VisualState x:Name="Focused">
                    <Storyboard>
                      <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="#3366CC"/>
                      </ObjectAnimationUsingKeyFrames>-->
                      <!--<DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                      <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>-->
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Unfocused"/>
                  <VisualState x:Name="PointerFocused"/>
                </VisualStateGroup>
              </VisualStateManager.VisualStateGroups>
              <Grid x:Name="GridRoot" Margin="5 20 5 0">
                <Grid x:Name="GridBackground">
                  <Grid Margin="10 5 10 5">
                    <!--<Grid.ColumnDefinitions>
                      <ColumnDefinition Width="0"/>
                      <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>-->
                    <!--<Grid VerticalAlignment="Top">
                      <Ellipse x:Name="BackgroundEllipse" Visibility="Collapsed" Fill="{ThemeResource RadioButtonBackgroundThemeBrush}" Height="23" Stroke="{ThemeResource RadioButtonBorderThemeBrush}" StrokeThickness="{ThemeResource RadioButtonBorderThemeThickness}" UseLayoutRounding="False" Width="23"/>
                      <Ellipse x:Name="CheckGlyph" Visibility="Collapsed" Fill="{ThemeResource RadioButtonForegroundThemeBrush}" Height="13" Opacity="0" UseLayoutRounding="False" Width="13"/>
                      <Rectangle x:Name="FocusVisualWhite" Height="29" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{ThemeResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1" Width="29"/>
                      <Rectangle x:Name="FocusVisualBlack" Height="29" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{ThemeResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1" Width="29"/>
                    </Grid>-->
                    <ContentPresenter x:Name="ContentPresenter" AutomationProperties.AccessibilityView="Raw" FontSize="40" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" Grid.Column="1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                  </Grid>
                </Grid>
              </Grid>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="FlipViewTabsStyle" TargetType="FlipView">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="TabNavigation" Value="Once"/>
      <Setter Property="IsTabStop" Value="False"/>
      <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
      <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
      <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False"/>
      <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="False"/>
      <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="True"/>
      <Setter Property="ScrollViewer.IsVerticalScrollChainingEnabled" Value="True"/>
      <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
      <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
      <Setter Property="ItemsPanel">
        <Setter.Value>
          <ItemsPanelTemplate>
            <VirtualizingStackPanel AreScrollSnapPointsRegular="True" Orientation="Horizontal"/>
          </ItemsPanelTemplate>
        </Setter.Value>
      </Setter>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="FlipView">
            <Grid>
              <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="FocusStates">
                  <VisualState x:Name="Focused">
                    <Storyboard>
                      <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                      <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Unfocused"/>
                  <VisualState x:Name="PointerFocused"/>
                </VisualStateGroup>
              </VisualStateManager.VisualStateGroups>
              <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="3">
                <Border.Resources>
                  <ControlTemplate x:Key="HorizontalNextTemplate" TargetType="Button">
                    <Grid Width="0" Height="0"></Grid>
                  </ControlTemplate>
                  <ControlTemplate x:Key="HorizontalPreviousTemplate" TargetType="Button">
                    <Grid Width="0" Height="0"></Grid>
                  </ControlTemplate>
                  <ControlTemplate x:Key="VerticalNextTemplate" TargetType="Button">
                    <Grid Width="0" Height="0"></Grid>
                  </ControlTemplate>
                  <ControlTemplate x:Key="VerticalPreviousTemplate" TargetType="Button">
                    <Grid Width="0" Height="0"></Grid>
                  </ControlTemplate>
                </Border.Resources>
                <Grid>
                  <ScrollViewer x:Name="ScrollingHost" AutomationProperties.AccessibilityView="Raw" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalSnapPointsType="MandatorySingle" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}" IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Padding="{TemplateBinding Padding}" TabNavigation="{TemplateBinding TabNavigation}" VerticalSnapPointsType="MandatorySingle" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled">
                    <ItemsPresenter/>
                  </ScrollViewer>
                  <Button x:Name="PreviousButtonHorizontal" HorizontalAlignment="Left" Height="40" IsTabStop="False" Template="{ThemeResource HorizontalPreviousTemplate}" VerticalAlignment="Center" Width="70"/>
                  <Button x:Name="NextButtonHorizontal" HorizontalAlignment="Right" Height="40" IsTabStop="False" Template="{StaticResource HorizontalNextTemplate}" VerticalAlignment="Center" Width="70"/>
                  <Button x:Name="PreviousButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalPreviousTemplate}" VerticalAlignment="Top" Width="70"/>
                  <Button x:Name="NextButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalNextTemplate}" VerticalAlignment="Bottom" Width="70"/>
                </Grid>
              </Border>
              <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{ThemeResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
              <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{ThemeResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Page.Resources>

  <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
      <RowDefinition Height="140"/>
      <RowDefinition Height="*"/>
      <!--<RowDefinition Height="190"/>-->
    </Grid.RowDefinitions>

    <Grid Height="180" DataContext="{Binding SpriteEditorViewModel, Source={ StaticResource Locator }}">
      <Grid.ChildrenTransitions>
        <TransitionCollection>
          <EntranceThemeTransition/>
        </TransitionCollection>
      </Grid.ChildrenTransitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition/>
      </Grid.ColumnDefinitions>
      <Button Margin="39,39,0,39" Name="ButtonGoBack"
              Click="ButtonGoBack_OnClick"
                        Style="{StaticResource NavigationBackButtonNormalStyle}"
                        VerticalAlignment="Center"
                        AutomationProperties.Name="Back"
                        AutomationProperties.AutomationId="BackButton"
                        AutomationProperties.ItemType="Navigation Button"/>

      <application:Logo Grid.Column="1" Margin="20 30 10 30" ScaleFactor="0.75" 
                        Width="65" TextVisibility="Collapsed"></application:Logo>
      <Grid x:Name="GridHeaderContent" Visibility="Visible" Margin="0 0 0 0" 
            VerticalAlignment="Center" Grid.Column="2" HorizontalAlignment="Left">
        <TextBlock Text="{Binding CurrentProject.ProjectHeader.ProgramName}" 
                   Style="{StaticResource HeaderTextBlockStyle}" IsHitTestVisible="false"/>
      </Grid>
    </Grid>

    <Grid Grid.Row="1">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
      <Grid Grid.Row="1" DataContext="{Binding SpriteEditorViewModel, Source={ StaticResource Locator }}">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>

          <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0 -30 0 0">
            <RadioButton x:Name="RadioButtonActions" Content="{Binding Resources.Editor_PivotActions, Source={StaticResource LocalizedStrings}}"
                         Click="RadioButtonTabs_Click" Style="{StaticResource RadioButtonTabsTemplate}"
                         Tag="0" Margin="5" IsChecked="True"  />
            <RadioButton x:Name="RadioButtonLooks" Content="{Binding Resources.Editor_PivotCostumes, Source={StaticResource LocalizedStrings}}"
                         Click="RadioButtonTabs_Click" Style="{StaticResource RadioButtonTabsTemplate}"
                         Tag="1" Margin="5" />
            <RadioButton x:Name="RadioButtonSounds" Content="{Binding Resources.Editor_PivotSounds, Source={StaticResource LocalizedStrings}}"
                         Click="RadioButtonTabs_Click" Style="{StaticResource RadioButtonTabsTemplate}"
                         Tag="2" Margin="5" />
          </StackPanel>

          <FlipView x:Name="FlipViewTabs" Style="{StaticResource FlipViewTabsStyle}"
                  SelectionChanged="FlipViewTabs_OnSelectionChanged"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  UseTouchAnimationsForAllNavigation="False"
                  Grid.Row="1">
            <FlipViewItem Height="370" VerticalAlignment="Top">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition/>
                </Grid.RowDefinitions>

                <!--<actions:ActionsControl Actions="{ Binding SelectedSprite.Scripts }" >

                </actions:ActionsControl>-->

                <GridView Grid.Row="1" Name="ItemsControlScripts" ItemsSource="{Binding SelectedSprite.Scripts.Scripts}">
                  <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                      <WrapGrid Orientation="Vertical" MaximumRowsOrColumns="1" />
                    </ItemsPanelTemplate>
                  </ItemsControl.ItemsPanel>
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Grid DataContext="{Binding}" Width="500" Height="300" Margin="10" Background="Goldenrod">
                        <Grid>
                          <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                          </Grid.RowDefinitions>

                          <Grid Grid.Row="0">
                            <ContentControl Name="ContentControlScript" Content="{Binding}" ContentTemplateSelector="{ StaticResource ActionTemplate }" />
                          </Grid>

                          <Grid Grid.Row="1">
                            <ItemsControl Name="ItemsControlBricks" ItemsSource="{Binding Bricks.Bricks}" ItemTemplateSelector="{ StaticResource ActionTemplate }">
                              <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                  <WrapGrid Orientation="Vertical" />
                                </ItemsPanelTemplate>
                              </ItemsControl.ItemsPanel>
                            </ItemsControl>
                          </Grid>
                        </Grid>
                      </Grid>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </GridView>





                <!--<listView:BindableGridView x:Name="GridViewActions" HorizontalAlignment="Left" VerticalAlignment="Top" 
                          Grid.Row="1" CanReorderItems="True" ItemsSource="{Binding ScriptBricks }" 
                  ItemTemplateSelector="{StaticResource ActionTemplate}" 
                  SelectionChanged="GridViewActions_OnSelectionChanged" SelectedItems="{Binding SelectedActions}">
                </listView:BindableGridView>-->
              </Grid>
            </FlipViewItem>
            <FlipViewItem>
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="1">
                  <TextBlock Name="Test"/>

                  <listView:BindableGridView x:Name="GridViewLooks" 
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            AllowDrop="True" CanReorderItems="True"
                            ItemTemplateSelector="{StaticResource ActionTemplate}" ItemsSource="{Binding Costumes }" 
                            SelectionMode="Multiple" SelectionChanged="GridViewLooks_OnSelectionChanged"
                            SelectedItems="{Binding SelectedCostumes}">
                    <listView:BindableGridView.Footer>
                      <Button >
                        <Button.Template>
                          <ControlTemplate>
                            <Grid Background="BlueViolet" Height="90" Width="300"  >
                              <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Text="+" FontSize="50" Margin="0 0 0 12"/>
                            </Grid>
                          </ControlTemplate>
                        </Button.Template>
                        <Button.Flyout>
                          <Flyout Opened="NewLookFlyout_OnOpening">
                            <costumes:NewCostumeSourceSelectionView Width="400"/>
                          </Flyout>
                        </Button.Flyout>
                      </Button>
                    </listView:BindableGridView.Footer>
                    <listView:BindableGridView.ItemTemplate>
                      <DataTemplate>
                        <Grid Background="{Binding StaticTheme.CostumesBrush.NativeBrush, Source={StaticResource ThemeChooser}}" 
                        Margin="0 5 0 5" Height="90" Width="300"  DataContext="{Binding}">
                          <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100" />
                            <ColumnDefinition Width="3*" />
                          </Grid.ColumnDefinitions>
                          <Image Grid.Column="0" Source="{Binding Image.ImageSource}" 
                       MaxWidth="120" MaxHeight="120" Margin="10 10 5 10" VerticalAlignment="Stretch" />
                          <Grid Grid.Column="1" Margin="5">
                            <TextBlock Grid.Row="0" FontSize="28" Margin="15 5 5 5" Text="{Binding Name}" 
                             VerticalAlignment="Center" />
                          </Grid>
                        </Grid>
                      </DataTemplate>
                    </listView:BindableGridView.ItemTemplate>
                  </listView:BindableGridView>
                </Grid>
              </Grid>
            </FlipViewItem>
            <FlipViewItem>
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="1">
                  <listView:BindableGridView x:Name="GridViewSounds" HorizontalAlignment="Left" VerticalAlignment="Top" AllowDrop="True" CanReorderItems="True"
                    ItemsSource="{Binding Sounds }" SelectionMode="Multiple"
                    SelectionChanged="GridViewSounds_OnSelectionChanged"
                    SelectedItems="{Binding SelectedSounds}">
                    <listView:BindableGridView.Footer>
                      <Button>
                        <Button.Template>
                          <ControlTemplate>
                            <Grid Background="BlueViolet" Height="90" Width="300"  >
                              <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Text="+" FontSize="50" Margin="0 0 0 12"/>
                            </Grid>
                          </ControlTemplate>
                        </Button.Template>
                        <Button.Flyout>
                          <Flyout Opened="NewSoundFlyout_OnOpening">
                            <sounds:NewSoundSourceSelectionView Width="400"/>
                          </Flyout>
                        </Button.Flyout>
                      </Button>
                    </listView:BindableGridView.Footer>
                    <listView:BindableGridView.ItemTemplate>
                      <DataTemplate>
                        <Grid Background="{Binding StaticTheme.SoundsBrush.NativeBrush, Source={StaticResource ThemeChooser}}" 
                          Margin="0 5 0 5" Height="90" Width="300" DataContext="{Binding}">
                          <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="3*" />
                          </Grid.ColumnDefinitions>
                          <!--<buttons:PlayPauseButton Group="{StaticResource PlayPauseButtonGroupSounds}" 
                                           RoundBorderThickness="6" Margin="0 12 0 12"
                                         Grid.Column="0" Height="80" Width="80" />-->
                          <Grid Grid.Column="1" Margin="5">
                            <TextBlock Grid.Row="0" FontSize="28" Margin="15 5 5 5" Text="{Binding Name}" 
                               VerticalAlignment="Center" />
                          </Grid>
                        </Grid>
                      </DataTemplate>
                    </listView:BindableGridView.ItemTemplate>
                  </listView:BindableGridView >
                </Grid>
              </Grid>
            </FlipViewItem>
          </FlipView>

          <!--<TextBlock Text="{Binding Resources.Editor_SelectObjectToEditSprites, Source={StaticResource LocalizedStrings}}"></TextBlock>-->
        </Grid>
      </Grid>

      <Grid Grid.Row="0" DataContext="{Binding SpritesViewModel, Source={ StaticResource Locator }}">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Margin="30 5 10 0" Orientation="Horizontal">
          <TextBlock Text="{Binding Resources.Editor_ObjectPlural, Source={StaticResource LocalizedStrings}}"
                     VerticalAlignment="Center" FontSize="36"/>
        </StackPanel>

        <GridView
          x:Name="GridViewSprites"
          Grid.Row="1"
          Margin="10 0 10 0"
          Height="110"
          IsSwipeEnabled="True"
          HorizontalAlignment="Left" VerticalAlignment="Top"
          SelectionMode="Single"
          ItemsSource="{Binding Sprites}"
          SelectedItem="{Binding SelectedSprite, Mode=TwoWay}"
          SelectionChanged="GridViewSprites_OnSelectionChanged"
          Foreground="White">
          <GridView.ItemTemplate>
            <DataTemplate>
              <Grid Margin="5" Height="90" Width="330"
                    Background="{Binding StaticTheme.ObjectsBrush.NativeBrush, Source ={StaticResource ThemeChooser}}">
                <Grid HorizontalAlignment="Right">
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                  </Grid.RowDefinitions>
                  <Grid Grid.Row="1" Margin="0 20 0 20" HorizontalAlignment="Right" >
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="Auto"/>
                      <ColumnDefinition Width="Auto"/>
                      <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0" Margin="5 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Center" 
                         Source="{Binding Costumes.Costumes[0].Image.ImageSource}" MaxWidth="50" />
                    <Image Grid.Column="1" Margin="5 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Center" 
                         Source="{Binding Costumes.Costumes[1].Image.ImageSource}"  MaxWidth="50" />
                    <Image Grid.Column="2" Margin="5 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Center" 
                         Source="{Binding Costumes.Costumes[2].Image.ImageSource}"  MaxWidth="50" />
                  </Grid>
                </Grid>
                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0 0 15 0"
                            Background="{Binding StaticTheme.ObjectsBrush.NativeBrush, Source ={StaticResource ThemeChooser}}">
                  <TextBlock VerticalAlignment="Center" FontSize="28" Margin="5 5 5 5" Text="{Binding Name}" />

                  <StackPanel Margin="5 0 0 0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock FontSize="16" Margin="0" Text="{Binding Scripts.ActionCount}" />
                    <TextBlock FontSize="16" Margin="0" Text="/" />
                    <TextBlock FontSize="16" Margin="0" Text="{Binding Costumes.Costumes.Count}" />
                    <TextBlock FontSize="16" Margin="0" Text="/" />
                    <TextBlock FontSize="16" Margin="0" Text="{Binding Sounds.Sounds.Count}" />
                  </StackPanel>
                </StackPanel>
              </Grid>
            </DataTemplate>
          </GridView.ItemTemplate>
          <GridView.Footer>
            <Button>
              <Button.Template>
                <ControlTemplate>
                  <Grid Background="BlueViolet" Height="90" Width="90"  >
                    <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Text="+" FontSize="50" Margin="0 0 0 12"/>
                  </Grid>
                </ControlTemplate>
              </Button.Template>
              <Button.Flyout>
                <Flyout Opened="NewSpriteFlyout_OnOpen">
                  <local:AddNewSpriteView Width="400"/>
                </Flyout>
              </Button.Flyout>
            </Button>
          </GridView.Footer>
        </GridView>
      </Grid>
    </Grid>

    <!--<Grid Grid.Row="2">
      <StackPanel Orientation="Horizontal">
        <Grid Name="GridDelete" Width="190" Height="190" Margin="5" Background="DarkSlateGray" AllowDrop="True" DragEnter="GridBasket_OnDragEnter" DragLeave="GridBasket_OnDragLeave" Drop="GridBasket_OnDrop">
          <TextBlock Text="Delete" FontSize="30" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Grid>
        <Grid Name="GridCopy" Width="190" Height="190" Margin="5" Background="DarkSlateGray" AllowDrop="True" DragEnter="GridBasket_OnDragEnter" DragLeave="GridBasket_OnDragLeave" Drop="GridBasket_OnDrop">
          <TextBlock Text="Copy" FontSize="30" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Grid>
        <Grid Name="GridEdit" Width="190" Height="190" Margin="5" Background="DarkSlateGray" AllowDrop="True" DragEnter="GridBasket_OnDragEnter" DragLeave="GridBasket_OnDragLeave" Drop="GridBasket_OnDrop">
          <TextBlock Text="Edit" FontSize="30" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Grid>
      </StackPanel>

    </Grid>-->
  </Grid>

  <Page.BottomAppBar>
    <AppBar Name="AppBarBottomn" Margin="0 0 0 -2" Padding="0 0 0 0" HorizontalAlignment="Left"
            Background="{Binding SelectedTheme.AppBarColor.NativeBrush ,Source={StaticResource ThemeChooser}}" IsSticky="True" >
      <Grid>
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>

          <ItemsControl x:Name="ItemsControlAppBars" Grid.Column="0" Margin="2">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapGrid Orientation="Horizontal"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <Border Name="AppbarObjects" DataContext="{Binding SpritesViewModel, Source={ StaticResource Locator }}"
                Background="{Binding Path=StaticTheme.ObjectsBrush.NativeBrush, Source={StaticResource ThemeChooser}}"
                BorderThickness="0" Margin="2"
                BorderBrush="{Binding Path=StaticTheme.AppBarBorderBrush.NativeBrush, Source={StaticResource ThemeChooser}}">
              <appBar:EditorAppBar
                VerticalAlignment="Bottom"
                TargetType="Object"
                ClearSelectionCommand="{Binding ClearObjectsSelectionCommand}"
                CopyCommand="{Binding CopySpriteCommand}"
                DeleteCommand="{Binding DeleteSpriteCommand}"
                NewCommand="{Binding AddNewSpriteCommand}"
                NumberOfSelectedItems="{Binding SelectedSprite, Converter={StaticResource NullIntCountConverter}}">
                <appBar:EditorAppBar.NewFlyout>
                  <Flyout Opened="NewSpriteFlyout_OnOpen">
                    <local:AddNewSpriteView Width="400"/>
                  </Flyout>
                </appBar:EditorAppBar.NewFlyout>
                <appBar:EditorAppBar.EditFlyout>
                  <Flyout Opened="FlyoutChangeSprite_OnOpening">
                    <local:ChangeSpriteView Width="400"/>
                  </Flyout>
                </appBar:EditorAppBar.EditFlyout>
              </appBar:EditorAppBar>
            </Border>

            <Border Name="AppbarActions" Background="{Binding Path=StaticTheme.ActionsBrush.NativeBrush, Source={StaticResource ThemeChooser}}"
                BorderThickness="0" Margin="2"
                DataContext="{Binding SpriteEditorViewModel, Source={ StaticResource Locator }}"
                BorderBrush="{Binding Path=StaticTheme.AppBarBorderBrush.NativeBrush, Source={StaticResource ThemeChooser}}">
              <appBar:EditorAppBar
              VerticalAlignment="Bottom"
              TargetType="Script"
              ClearSelectionCommand="{Binding ClearScriptsSelectionCommand}"
              CopyCommand="{Binding CopyScriptBrickCommand}"
              DeleteCommand="{Binding DeleteScriptBrickCommand}"
              EditCommand="{Binding EditCostumeCommand}"
              NumberOfSelectedItems="{Binding SelectedActions.Count}">
              </appBar:EditorAppBar>
            </Border>

            <Border Name="AppbarLooks" Background="{Binding Path=StaticTheme.CostumesBrush.NativeBrush, Source={StaticResource ThemeChooser}}"
                BorderThickness="0" Margin="2" DataContext="{Binding SpriteEditorViewModel, Source={ StaticResource Locator }}"
                BorderBrush="{Binding Path=StaticTheme.AppBarBorderBrush.NativeBrush, Source={StaticResource ThemeChooser}}">
              <appBar:EditorAppBar
                VerticalAlignment="Bottom"
                TargetType="Costume"
                ClearSelectionCommand="{Binding ClearCostumesSelectionCommand}"
                CopyCommand="{Binding CopyCostumeCommand}"
                DeleteCommand="{Binding DeleteCostumeCommand}"
                EditCommand="{Binding EditCostumeCommand}"
                NumberOfSelectedItems="{Binding SelectedCostumes.Count}">
                <appBar:EditorAppBar.EditFlyout>
                  <Flyout Opened="TileGeneratorFlyout_OnOpened">
                    <costumes:ChangeCostumeView Width="400"/>
                  </Flyout>
                </appBar:EditorAppBar.EditFlyout>
              </appBar:EditorAppBar>
            </Border>

            <Border Name="AppbarSounds" Background="{Binding Path=StaticTheme.SoundsBrush.NativeBrush, Source={StaticResource ThemeChooser}}"
                BorderThickness="0" Margin="2" DataContext="{Binding SpriteEditorViewModel, Source={ StaticResource Locator }}"
                BorderBrush="{Binding Path=StaticTheme.AppBarBorderBrush.NativeBrush, Source={StaticResource ThemeChooser}}">
              <appBar:EditorAppBar 
                VerticalAlignment="Bottom"
                TargetType="Sound"
                ClearSelectionCommand="{Binding ClearSoundsSelectionCommand}"
                DeleteCommand="{Binding DeleteSoundCommand}"
                EditCommand="{Binding EditSoundCommand}"
                NumberOfSelectedItems="{Binding SelectedSounds.Count}">
              </appBar:EditorAppBar>
            </Border>
          </ItemsControl>

          <Grid Grid.Column="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="140" Height="140"
            DataContext="{Binding SpritesViewModel, Source={ StaticResource Locator }}"
            Background="{Binding SelectedTheme.AppBarColor.NativeBrush ,Source={StaticResource ThemeChooser}}">
            <appBar:AppBarPlayButton PlayCommand="{Binding StartPlayerCommand}"></appBar:AppBarPlayButton>
          </Grid>
        </Grid>
      </Grid>
    </AppBar >
  </Page.BottomAppBar>
</Page>
